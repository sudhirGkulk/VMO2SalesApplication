@model SalesApplication.Web.Models.ResultsDTO

@{
    ViewData["Title"] = "Sales Summary";
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@ViewData["Title"]</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Include jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <script>
        $(document).ready(function () {
            // Function to fetch and update sales summary
            function fetchSalesSummary() {
                const summary = {
                    TotalSales: @Model.TotalSales,
                    TotalUnitsSold: @Model.TotalUnitsSold,
                    TotalTransactions: @Model.TotalTransactions,
                    AvgSalePrice: @Model.AvgSalePrice
                };

                // Update the UI elements with the fetched summary data
                $('#totalSales').text(`£${summary.TotalSales.toFixed(2)}`);
                $('#totalUnitsSold').text(summary.TotalUnitsSold);
                $('#totalTransactions').text(summary.TotalTransactions);
                $('#avgSalePrice').text(`£${summary.AvgSalePrice.toFixed(2)}`);
            }

            // Call the function to set initial values
            fetchSalesSummary();
        });
    </script>
</head>
<body>

    <div class="container mt-5">
        <div class="row">
            <!-- Page Title -->
            <div class="col-12 text-center mb-4">
                <h1 class="display-4">Sales Summary</h1>
                <p class="lead text-muted">Here is a detailed summary of your sales data.</p>
            </div>

            <!-- Total Sales Card -->
            <div class="col-md-3 mb-4">
                <div class="card border-info shadow-lg">
                    <div class="card-header bg-info text-white">
                        <h5 class="card-title mb-0"><i class="fas fa-dollar-sign"></i> Total Sales</h5>
                    </div>
                    <div class="card-body">
                        <h3 class="card-text text-center" id="totalSales"></h3>
                    </div>
                </div>
            </div>

            <!-- Total Units Sold Card -->
            <div class="col-md-3 mb-4">
                <div class="card border-success shadow-lg">
                    <div class="card-header bg-success text-white">
                        <h5 class="card-title mb-0"><i class="fas fa-cogs"></i> Total Units Sold</h5>
                    </div>
                    <div class="card-body">
                        <h3 class="card-text text-center" id="totalUnitsSold"></h3>
                    </div>
                </div>
            </div>

            <!-- Total Transactions Card -->
            <div class="col-md-3 mb-4">
                <div class="card border-primary shadow-lg">
                    <div class="card-header bg-primary text-white">
                        <h5 class="card-title mb-0"><i class="fas fa-clipboard-list"></i> Total Transactions</h5>
                    </div>
                    <div class="card-body">
                        <h3 class="card-text text-center" id="totalTransactions"></h3>
                    </div>
                </div>
            </div>

            <!-- Average Sale Price Card -->
            <div class="col-md-3 mb-4">
                <div class="card border-warning shadow-lg">
                    <div class="card-header bg-warning text-white">
                        <h5 class="card-title mb-0"><i class="fas fa-tag"></i> Average Sale Price</h5>
                    </div>
                    <div class="card-body">
                        <h3 class="card-text text-center" id="avgSalePrice"></h3>
                    </div>
                </div>
            </div>
        </div>

        <!-- Button to refresh data -->
        <div class="row mt-5">
            <div class="col-12 text-center">
                <button class="btn btn-primary btn-lg" onclick="fetchSalesSummary()">Refresh Data</button>
            </div>
        </div>
    </div>

    <!-- Optional: Link to load FontAwesome icons -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/js/all.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"></script>

</body>
</html>